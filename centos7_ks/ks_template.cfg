#platform=x86, AMD64, or Intel EM64T
#version=DEVEL
# Firewall configuration
#firewall --enabled --service=ssh,ssh
firewall --disabled
# Install OS instead of upgrade
install
# Use network installation
url --url="http://Kickstart_PrivateKickstartHost/Kickstart_PrivateKickstartBasedir/centos7/"
# Use text mode install
text
# Use interactive kickstart installation method
#interactive
# System keyboard
keyboard us
# System language
lang en_US
# SELinux configuration
#selinux --enforcing
#selinux --permissive
selinux --disabled
# Do not configure the X Window System
skipx
# Installation logging level
logging --level=info
# Reboot after installation
reboot
# System timezone
timezone  America/Los_Angeles

#Disk info - generated by pre install script
%include /tmp/user_partition_info

#Only minimal installation
%packages
@core
%end

#Pre-installation - disk partitioning etc
%pre --interpreter /bin/bash
wget --no-parent -r -nH --cut-dirs=2 http://Kickstart_PrivateKickstartHost/Kickstart_PrivateKickstartBasedir/centos7/scripts/
cd scripts
bash -x pre_install.sh
%end

#Download post-install scripts and transfer to root partition
%post  --interpreter /bin/bash --log=/var/log/ks_post_install.log --nochroot
wget --no-parent -r -nH --cut-dirs=2 http://Kickstart_PrivateKickstartHost/Kickstart_PrivateKickstartBasedir/centos7/scripts/
/bin/cp -f -r scripts /mnt/sysimage/
%end

#Post-install - ssh public keys etc
%post  --interpreter /bin/bash --log=/var/log/ks_post_install.log 
cd /scripts
bash -x post_install.sh
%end
